/*
  This program and the accompanying materials are
  made available under the terms of the Eclipse Public License v2.0 which accompanies
  this distribution, and is available at https://www.eclipse.org/legal/epl-v20.html
  
  SPDX-License-Identifier: EPL-2.0
  
  Copyright Contributors to the Zowe Project.
*/
import { Component, Inject, EventEmitter } from '@angular/core';
import { MAT_DIALOG_DATA } from '@angular/material/dialog';
import * as i0 from "@angular/core";
import * as i1 from "@angular/common/http";
import * as i2 from "@angular/material/snack-bar";
import * as i3 from "@angular/forms";
import * as i4 from "@angular/material/dialog";
import * as i5 from "@angular/material/form-field";
import * as i6 from "@angular/material/icon";
import * as i7 from "@angular/material/input";
import * as i8 from "@angular/material/button";
import * as i9 from "zlux-widgets";
export class CreateFileModal {
    constructor(data, http, snackBar) {
        this.http = http;
        this.snackBar = snackBar;
        this.folderPathObtainedFromNode = "";
        // Block unallowed characters and "." and ".." etc
        this.filePattern = /(([^\x00-\x1F!"$'\(\)*,\/:;<>\?\[\\\]\{\|\}\x7F\s]+)$)/;
        this.onFileCreate = new EventEmitter();
        const node = data.event;
        if (node.path) {
            this.dirPath = node.path;
        }
        else {
            this.dirPath = "";
        }
        this.fileName = "";
        this.folderPathObtainedFromNode = this.dirPath;
    }
    createFile() {
        const directoryPath = this.dirPath;
        const path = directoryPath + '/' + this.fileName;
        let onFileCreateResponse = new Map();
        onFileCreateResponse.set("pathAndName", this.dirPath + "/" + this.fileName);
        if (this.dirPath != this.folderPathObtainedFromNode) {
            //If the user changed the path obtained from the node or the node has never been opened...
            onFileCreateResponse.set("updateExistingTree", false); //then we can't update the tree.
        }
        else { //If the user kept the path obtained from the node...
            onFileCreateResponse.set("updateExistingTree", true); //then we can add that new folder into the existing node.
        }
        this.onFileCreate.emit(onFileCreateResponse); //then we can't update the tree.
    }
    static { this.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "18.0.7", ngImport: i0, type: CreateFileModal, deps: [{ token: MAT_DIALOG_DATA }, { token: i1.HttpClient }, { token: i2.MatSnackBar }], target: i0.ɵɵFactoryTarget.Component }); }
    static { this.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "17.0.0", version: "18.0.7", type: CreateFileModal, selector: "create-file-modal", ngImport: i0, template: "<!--\nThis program and the accompanying materials are\nmade available under the terms of the Eclipse Public License v2.0 which accompanies\nthis distribution, and is available at https://www.eclipse.org/legal/epl-v20.html\n\nSPDX-License-Identifier: EPL-2.0\n\nCopyright Contributors to the Zowe Project.\n-->\n<zlux-tab-trap hiddenIds=\"createfileclearicon1,createfileclearicon2\" hiddenPos=\"2,4\"></zlux-tab-trap>\n<div class=\"padding-1\">\n  <div class=\"d-flex\">\n    <div class=\"modal-icon-container\">\n      <!-- FA Icon is determined by class name, so we hardcode the style here -->\n      <mat-icon style=\"font-size: 30px; position: absolute;\">create_new_file</mat-icon>\n    </div>\n    <!-- <i class=\"{{fileIcon}}\" style=\"font-size: 30px;position: absolute;margin-top: 2px;margin-left: 3px;color: #000000;\"></i> -->\n    <div>\n      <h2 mat-dialog-title class=\"modal-content-body\">Create a File</h2>\n    </div>\n    <div>\n      <button mat-dialog-close class=\"close-dialog-btn\"><i class=\"fa fa-close\"></i></button>\n    </div>\n  </div>\n  <mat-dialog-content>\n    <label>File name:</label>\n    <mat-form-field style=\"margin-left: 15px;\">\n      <input id=\"create-file-input\" name=\"name\" [pattern]=\"filePattern\" matInput type=\"text\" [(ngModel)]=\"fileName\">\n      @if (fileName) {\n      <button class=\"modal-clear-button\" mat-button matSuffix mat-icon-button tabindex=\"-1\" aria-label=\"Clear\"\n        (click)=\"fileName=''\">\n        <mat-icon class=\"create-file-clear-icon\">close</mat-icon>\n      </button>\n      }\n    </mat-form-field>\n  </mat-dialog-content>\n\n  <mat-dialog-content>\n    <label>Path:</label>\n    <mat-form-field style=\"margin-left: 45px;\">\n      <input id=\"create-path-input\" [pattern]=\"\" matInput type=\"text\" [(ngModel)]=\"dirPath\">\n      @if (dirPath) {\n      <button class=\"modal-clear-button\" mat-button matSuffix mat-icon-button tabindex=\"-1\" aria-label=\"Clear\"\n        (click)=\"dirPath=''\">\n        <mat-icon class=\"create-file-clear-icon\">close</mat-icon>\n      </button>\n      }\n    </mat-form-field>\n  </mat-dialog-content>\n  <mat-dialog-actions>\n    <button mat-button mat-dialog-close class=\"modal-mat-button create\" (click)=\"createFile()\"\n      [disabled]=\"!fileName || !dirPath\">Create</button>\n    <!-- The mat-dialog-close directive optionally accepts a value as a result for the dialog. -->\n  </mat-dialog-actions>\n</div>\n<!--\n    This program and the accompanying materials are\n    made available under the terms of the Eclipse Public License v2.0 which accompanies\n    this distribution, and is available at https://www.eclipse.org/legal/epl-v20.html\n\n    SPDX-License-Identifier: EPL-2.0\n\n    Copyright Contributors to the Zowe Project.\n    -->", styles: [".create-file-clear-icon{font-size:14px;height:5px}.mat-mdc-dialog-content{padding-top:0!important;padding-bottom:0!important}\n", "mat-dialog-actions{justify-content:flex-end}.close-dialog-btn{float:right;border:none;background:transparent;outline:none;padding:1rem}.modal-column{float:left;width:50%}.modal-column-full-width{width:100%}.modal-row:after{content:\"\";display:table;clear:both}.modal-row{padding-top:15px;font-size:medium}.modal-title{vertical-align:middle;float:left}.selectable-text{-moz-user-select:text!important;-khtml-user-select:text!important;-webkit-user-select:text!important;-ms-user-select:text!important;user-select:text!important;min-width:200px}.modal-mat-button{border-radius:3px;border:solid;color:#3f51b5;border-width:1.75px;box-shadow:transparent;background-color:transparent;font-family:Roboto,Helvetica Neue,sans-serif;font-size:14px;font-weight:500}.modal-mat-button.cancel{color:#242424;border-color:transparent;margin-right:5px}.modal-mat-button.cancel:hover{background-color:#e0e0e0;-webkit-transition-duration:.2s;transition-duration:.2s}.modal-mat-button:hover{background-color:#2c4cff1f;-webkit-transition-duration:.2s;transition-duration:.2s}.modal-mat-button-delete{padding:6px;width:85px;border-radius:3px;border:solid;color:#e64242;border-width:1.75px;box-shadow:transparent;background-color:transparent;margin-top:25px;margin-right:-10px;font-family:Roboto,Helvetica Neue,sans-serif;font-size:14px;font-weight:500}.modal-mat-button-delete.cancel{border-color:transparent;color:#242424;margin-top:25px;margin-right:5px}.modal-mat-button-delete.cancel:hover{background-color:#e0e0e0;-webkit-transition-duration:.2s;transition-duration:.2s}.modal-mat-button-delete:hover{background-color:#fff0f0;-webkit-transition-duration:.2s;transition-duration:.2s}.modal-mat-header{margin-left:1rem;-webkit-user-select:text;user-select:text}.modal-icon{font-size:24px;position:absolute;margin-top:4px;margin-left:3px}.modal-content-body{margin-left:45px;margin-bottom:-5px;margin-top:1px;font-size:17px;min-width:400px}.modal-clear-button{border-radius:100%;background-color:transparent;border-color:transparent}.modal-clear-button:hover{background-color:#0000001f!important;transition:0!important;-webkit-transition-duration:0!important;transition-duration:0!important}.padding-1{padding:1rem}.d-flex{display:flex}.flex-align-items-start{align-items:flex-start}.modal-icon-container{display:flex;flex-direction:column;justify-content:center}.mat-mdc-button:not(:disabled){color:none}.mat-mdc-form-field-focus-overlay,.mdc-text-field--focused,.mat-mdc-text-field-wrapper:hover{background-color:#fff!important}.mat-mdc-form-field-infix{padding-top:8px!important;padding-bottom:8px!important;min-height:2rem!important}.mdc-text-field{padding:0!important}label{color:#000;font-size:14px}\n"], dependencies: [{ kind: "directive", type: i3.DefaultValueAccessor, selector: "input:not([type=checkbox])[formControlName],textarea[formControlName],input:not([type=checkbox])[formControl],textarea[formControl],input:not([type=checkbox])[ngModel],textarea[ngModel],[ngDefaultControl]" }, { kind: "directive", type: i3.NgControlStatus, selector: "[formControlName],[ngModel],[formControl]" }, { kind: "directive", type: i3.PatternValidator, selector: "[pattern][formControlName],[pattern][formControl],[pattern][ngModel]", inputs: ["pattern"] }, { kind: "directive", type: i3.NgModel, selector: "[ngModel]:not([formControlName]):not([formControl])", inputs: ["name", "disabled", "ngModel", "ngModelOptions"], outputs: ["ngModelChange"], exportAs: ["ngModel"] }, { kind: "directive", type: i4.MatDialogClose, selector: "[mat-dialog-close], [matDialogClose]", inputs: ["aria-label", "type", "mat-dialog-close", "matDialogClose"], exportAs: ["matDialogClose"] }, { kind: "directive", type: i4.MatDialogTitle, selector: "[mat-dialog-title], [matDialogTitle]", inputs: ["id"], exportAs: ["matDialogTitle"] }, { kind: "directive", type: i4.MatDialogActions, selector: "[mat-dialog-actions], mat-dialog-actions, [matDialogActions]", inputs: ["align"] }, { kind: "directive", type: i4.MatDialogContent, selector: "[mat-dialog-content], mat-dialog-content, [matDialogContent]" }, { kind: "component", type: i5.MatFormField, selector: "mat-form-field", inputs: ["hideRequiredMarker", "color", "floatLabel", "appearance", "subscriptSizing", "hintLabel"], exportAs: ["matFormField"] }, { kind: "directive", type: i5.MatSuffix, selector: "[matSuffix], [matIconSuffix], [matTextSuffix]", inputs: ["matTextSuffix"] }, { kind: "component", type: i6.MatIcon, selector: "mat-icon", inputs: ["color", "inline", "svgIcon", "fontSet", "fontIcon"], exportAs: ["matIcon"] }, { kind: "directive", type: i7.MatInput, selector: "input[matInput], textarea[matInput], select[matNativeControl],      input[matNativeControl], textarea[matNativeControl]", inputs: ["disabled", "id", "placeholder", "name", "required", "type", "errorStateMatcher", "aria-describedby", "value", "readonly"], exportAs: ["matInput"] }, { kind: "component", type: i8.MatButton, selector: "    button[mat-button], button[mat-raised-button], button[mat-flat-button],    button[mat-stroked-button]  ", exportAs: ["matButton"] }, { kind: "component", type: i8.MatIconButton, selector: "button[mat-icon-button]", exportAs: ["matButton"] }, { kind: "component", type: i9.ZluxTabbingComponent, selector: "zlux-tab-trap", inputs: ["hiddenIds", "hiddenPos"] }] }); }
}
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "18.0.7", ngImport: i0, type: CreateFileModal, decorators: [{
            type: Component,
            args: [{ selector: 'create-file-modal', template: "<!--\nThis program and the accompanying materials are\nmade available under the terms of the Eclipse Public License v2.0 which accompanies\nthis distribution, and is available at https://www.eclipse.org/legal/epl-v20.html\n\nSPDX-License-Identifier: EPL-2.0\n\nCopyright Contributors to the Zowe Project.\n-->\n<zlux-tab-trap hiddenIds=\"createfileclearicon1,createfileclearicon2\" hiddenPos=\"2,4\"></zlux-tab-trap>\n<div class=\"padding-1\">\n  <div class=\"d-flex\">\n    <div class=\"modal-icon-container\">\n      <!-- FA Icon is determined by class name, so we hardcode the style here -->\n      <mat-icon style=\"font-size: 30px; position: absolute;\">create_new_file</mat-icon>\n    </div>\n    <!-- <i class=\"{{fileIcon}}\" style=\"font-size: 30px;position: absolute;margin-top: 2px;margin-left: 3px;color: #000000;\"></i> -->\n    <div>\n      <h2 mat-dialog-title class=\"modal-content-body\">Create a File</h2>\n    </div>\n    <div>\n      <button mat-dialog-close class=\"close-dialog-btn\"><i class=\"fa fa-close\"></i></button>\n    </div>\n  </div>\n  <mat-dialog-content>\n    <label>File name:</label>\n    <mat-form-field style=\"margin-left: 15px;\">\n      <input id=\"create-file-input\" name=\"name\" [pattern]=\"filePattern\" matInput type=\"text\" [(ngModel)]=\"fileName\">\n      @if (fileName) {\n      <button class=\"modal-clear-button\" mat-button matSuffix mat-icon-button tabindex=\"-1\" aria-label=\"Clear\"\n        (click)=\"fileName=''\">\n        <mat-icon class=\"create-file-clear-icon\">close</mat-icon>\n      </button>\n      }\n    </mat-form-field>\n  </mat-dialog-content>\n\n  <mat-dialog-content>\n    <label>Path:</label>\n    <mat-form-field style=\"margin-left: 45px;\">\n      <input id=\"create-path-input\" [pattern]=\"\" matInput type=\"text\" [(ngModel)]=\"dirPath\">\n      @if (dirPath) {\n      <button class=\"modal-clear-button\" mat-button matSuffix mat-icon-button tabindex=\"-1\" aria-label=\"Clear\"\n        (click)=\"dirPath=''\">\n        <mat-icon class=\"create-file-clear-icon\">close</mat-icon>\n      </button>\n      }\n    </mat-form-field>\n  </mat-dialog-content>\n  <mat-dialog-actions>\n    <button mat-button mat-dialog-close class=\"modal-mat-button create\" (click)=\"createFile()\"\n      [disabled]=\"!fileName || !dirPath\">Create</button>\n    <!-- The mat-dialog-close directive optionally accepts a value as a result for the dialog. -->\n  </mat-dialog-actions>\n</div>\n<!--\n    This program and the accompanying materials are\n    made available under the terms of the Eclipse Public License v2.0 which accompanies\n    this distribution, and is available at https://www.eclipse.org/legal/epl-v20.html\n\n    SPDX-License-Identifier: EPL-2.0\n\n    Copyright Contributors to the Zowe Project.\n    -->", styles: [".create-file-clear-icon{font-size:14px;height:5px}.mat-mdc-dialog-content{padding-top:0!important;padding-bottom:0!important}\n", "mat-dialog-actions{justify-content:flex-end}.close-dialog-btn{float:right;border:none;background:transparent;outline:none;padding:1rem}.modal-column{float:left;width:50%}.modal-column-full-width{width:100%}.modal-row:after{content:\"\";display:table;clear:both}.modal-row{padding-top:15px;font-size:medium}.modal-title{vertical-align:middle;float:left}.selectable-text{-moz-user-select:text!important;-khtml-user-select:text!important;-webkit-user-select:text!important;-ms-user-select:text!important;user-select:text!important;min-width:200px}.modal-mat-button{border-radius:3px;border:solid;color:#3f51b5;border-width:1.75px;box-shadow:transparent;background-color:transparent;font-family:Roboto,Helvetica Neue,sans-serif;font-size:14px;font-weight:500}.modal-mat-button.cancel{color:#242424;border-color:transparent;margin-right:5px}.modal-mat-button.cancel:hover{background-color:#e0e0e0;-webkit-transition-duration:.2s;transition-duration:.2s}.modal-mat-button:hover{background-color:#2c4cff1f;-webkit-transition-duration:.2s;transition-duration:.2s}.modal-mat-button-delete{padding:6px;width:85px;border-radius:3px;border:solid;color:#e64242;border-width:1.75px;box-shadow:transparent;background-color:transparent;margin-top:25px;margin-right:-10px;font-family:Roboto,Helvetica Neue,sans-serif;font-size:14px;font-weight:500}.modal-mat-button-delete.cancel{border-color:transparent;color:#242424;margin-top:25px;margin-right:5px}.modal-mat-button-delete.cancel:hover{background-color:#e0e0e0;-webkit-transition-duration:.2s;transition-duration:.2s}.modal-mat-button-delete:hover{background-color:#fff0f0;-webkit-transition-duration:.2s;transition-duration:.2s}.modal-mat-header{margin-left:1rem;-webkit-user-select:text;user-select:text}.modal-icon{font-size:24px;position:absolute;margin-top:4px;margin-left:3px}.modal-content-body{margin-left:45px;margin-bottom:-5px;margin-top:1px;font-size:17px;min-width:400px}.modal-clear-button{border-radius:100%;background-color:transparent;border-color:transparent}.modal-clear-button:hover{background-color:#0000001f!important;transition:0!important;-webkit-transition-duration:0!important;transition-duration:0!important}.padding-1{padding:1rem}.d-flex{display:flex}.flex-align-items-start{align-items:flex-start}.modal-icon-container{display:flex;flex-direction:column;justify-content:center}.mat-mdc-button:not(:disabled){color:none}.mat-mdc-form-field-focus-overlay,.mdc-text-field--focused,.mat-mdc-text-field-wrapper:hover{background-color:#fff!important}.mat-mdc-form-field-infix{padding-top:8px!important;padding-bottom:8px!important;min-height:2rem!important}.mdc-text-field{padding:0!important}label{color:#000;font-size:14px}\n"] }]
        }], ctorParameters: () => [{ type: undefined, decorators: [{
                    type: Inject,
                    args: [MAT_DIALOG_DATA]
                }] }, { type: i1.HttpClient }, { type: i2.MatSnackBar }] });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY3JlYXRlLWZpbGUtbW9kYWwuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vcHJvamVjdHMvemx1eC1maWxlLWV4cGxvcmVyL3NyYy9saWIvY29tcG9uZW50cy9jcmVhdGUtZmlsZS1tb2RhbC9jcmVhdGUtZmlsZS1tb2RhbC5jb21wb25lbnQudHMiLCIuLi8uLi8uLi8uLi8uLi8uLi9wcm9qZWN0cy96bHV4LWZpbGUtZXhwbG9yZXIvc3JjL2xpYi9jb21wb25lbnRzL2NyZWF0ZS1maWxlLW1vZGFsL2NyZWF0ZS1maWxlLW1vZGFsLmNvbXBvbmVudC5odG1sIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUNBOzs7Ozs7OztFQVFFO0FBQ0YsT0FBTyxFQUFFLFNBQVMsRUFBRSxNQUFNLEVBQUUsWUFBWSxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBQ2hFLE9BQU8sRUFBRSxlQUFlLEVBQUUsTUFBTSwwQkFBMEIsQ0FBQzs7Ozs7Ozs7Ozs7QUFXM0QsTUFBTSxPQUFPLGVBQWU7SUFRMUIsWUFDMkIsSUFBUyxFQUMxQixJQUFnQixFQUNoQixRQUFxQjtRQURyQixTQUFJLEdBQUosSUFBSSxDQUFZO1FBQ2hCLGFBQVEsR0FBUixRQUFRLENBQWE7UUFSeEIsK0JBQTBCLEdBQUcsRUFBRSxDQUFDO1FBQ3ZDLGtEQUFrRDtRQUMzQyxnQkFBVyxHQUFHLHdEQUF3RCxDQUFDO1FBQzlFLGlCQUFZLEdBQUcsSUFBSSxZQUFZLEVBQUUsQ0FBQztRQU9oQyxNQUFNLElBQUksR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDO1FBQ3hCLElBQUksSUFBSSxDQUFDLElBQUksRUFBRSxDQUFDO1lBQ2QsSUFBSSxDQUFDLE9BQU8sR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDO1FBQzNCLENBQUM7YUFBTSxDQUFDO1lBQ04sSUFBSSxDQUFDLE9BQU8sR0FBRyxFQUFFLENBQUM7UUFDcEIsQ0FBQztRQUNELElBQUksQ0FBQyxRQUFRLEdBQUcsRUFBRSxDQUFDO1FBQ25CLElBQUksQ0FBQywwQkFBMEIsR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDO0lBRWpELENBQUM7SUFFRCxVQUFVO1FBQ1IsTUFBTSxhQUFhLEdBQVcsSUFBSSxDQUFDLE9BQU8sQ0FBQztRQUMzQyxNQUFNLElBQUksR0FBRyxhQUFhLEdBQUcsR0FBRyxHQUFHLElBQUksQ0FBQyxRQUFRLENBQUM7UUFDakQsSUFBSSxvQkFBb0IsR0FBRyxJQUFJLEdBQUcsRUFBRSxDQUFDO1FBQ3JDLG9CQUFvQixDQUFDLEdBQUcsQ0FBQyxhQUFhLEVBQUUsSUFBSSxDQUFDLE9BQU8sR0FBRyxHQUFHLEdBQUcsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDO1FBQzVFLElBQUksSUFBSSxDQUFDLE9BQU8sSUFBSSxJQUFJLENBQUMsMEJBQTBCLEVBQUUsQ0FBQztZQUNwRCwwRkFBMEY7WUFDMUYsb0JBQW9CLENBQUMsR0FBRyxDQUFDLG9CQUFvQixFQUFFLEtBQUssQ0FBQyxDQUFDLENBQUMsZ0NBQWdDO1FBQ3pGLENBQUM7YUFBTSxDQUFDLENBQUMscURBQXFEO1lBQzVELG9CQUFvQixDQUFDLEdBQUcsQ0FBQyxvQkFBb0IsRUFBRSxJQUFJLENBQUMsQ0FBQyxDQUFDLHlEQUF5RDtRQUNqSCxDQUFDO1FBQ0QsSUFBSSxDQUFDLFlBQVksQ0FBQyxJQUFJLENBQUMsb0JBQW9CLENBQUMsQ0FBQyxDQUFDLGdDQUFnQztJQUNoRixDQUFDOzhHQXBDVSxlQUFlLGtCQVNoQixlQUFlO2tHQVRkLGVBQWUseURDdEI1QiwydUZBK0RPOzsyRkR6Q00sZUFBZTtrQkFOM0IsU0FBUzsrQkFDRSxtQkFBbUI7OzBCQWMxQixNQUFNOzJCQUFDLGVBQWUiLCJzb3VyY2VzQ29udGVudCI6WyJcclxuLypcclxuICBUaGlzIHByb2dyYW0gYW5kIHRoZSBhY2NvbXBhbnlpbmcgbWF0ZXJpYWxzIGFyZVxyXG4gIG1hZGUgYXZhaWxhYmxlIHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgRWNsaXBzZSBQdWJsaWMgTGljZW5zZSB2Mi4wIHdoaWNoIGFjY29tcGFuaWVzXHJcbiAgdGhpcyBkaXN0cmlidXRpb24sIGFuZCBpcyBhdmFpbGFibGUgYXQgaHR0cHM6Ly93d3cuZWNsaXBzZS5vcmcvbGVnYWwvZXBsLXYyMC5odG1sXHJcbiAgXHJcbiAgU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEVQTC0yLjBcclxuICBcclxuICBDb3B5cmlnaHQgQ29udHJpYnV0b3JzIHRvIHRoZSBab3dlIFByb2plY3QuXHJcbiovXHJcbmltcG9ydCB7IENvbXBvbmVudCwgSW5qZWN0LCBFdmVudEVtaXR0ZXIgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcclxuaW1wb3J0IHsgTUFUX0RJQUxPR19EQVRBIH0gZnJvbSAnQGFuZ3VsYXIvbWF0ZXJpYWwvZGlhbG9nJztcclxuaW1wb3J0IHsgSHR0cENsaWVudCB9IGZyb20gJ0Bhbmd1bGFyL2NvbW1vbi9odHRwJztcclxuaW1wb3J0IHsgTWF0U25hY2tCYXIgfSBmcm9tICdAYW5ndWxhci9tYXRlcmlhbC9zbmFjay1iYXInO1xyXG5pbXBvcnQgeyBkZWZhdWx0U25hY2tiYXJPcHRpb25zIH0gZnJvbSAnLi4vLi4vc2hhcmVkL3NuYWNrYmFyLW9wdGlvbnMnO1xyXG5cclxuQENvbXBvbmVudCh7XHJcbiAgc2VsZWN0b3I6ICdjcmVhdGUtZmlsZS1tb2RhbCcsXHJcbiAgdGVtcGxhdGVVcmw6ICcuL2NyZWF0ZS1maWxlLW1vZGFsLmNvbXBvbmVudC5odG1sJyxcclxuICBzdHlsZVVybHM6IFsnLi9jcmVhdGUtZmlsZS1tb2RhbC5jb21wb25lbnQuc2NzcycsXHJcbiAgICAnLi4vLi4vc2hhcmVkL21vZGFsLmNvbXBvbmVudC5zY3NzJ10sXHJcbn0pXHJcbmV4cG9ydCBjbGFzcyBDcmVhdGVGaWxlTW9kYWwge1xyXG4gIHB1YmxpYyBmaWxlTmFtZTogc3RyaW5nO1xyXG4gIHB1YmxpYyBkaXJQYXRoOiBzdHJpbmc7XHJcbiAgcHVibGljIGZvbGRlclBhdGhPYnRhaW5lZEZyb21Ob2RlID0gXCJcIjtcclxuICAvLyBCbG9jayB1bmFsbG93ZWQgY2hhcmFjdGVycyBhbmQgXCIuXCIgYW5kIFwiLi5cIiBldGNcclxuICBwdWJsaWMgZmlsZVBhdHRlcm4gPSAvKChbXlxceDAwLVxceDFGIVwiJCdcXChcXCkqLFxcLzo7PD5cXD9cXFtcXFxcXFxdXFx7XFx8XFx9XFx4N0ZcXHNdKykkKS87XHJcbiAgb25GaWxlQ3JlYXRlID0gbmV3IEV2ZW50RW1pdHRlcigpO1xyXG5cclxuICBjb25zdHJ1Y3RvcihcclxuICAgIEBJbmplY3QoTUFUX0RJQUxPR19EQVRBKSBkYXRhOiBhbnksXHJcbiAgICBwcml2YXRlIGh0dHA6IEh0dHBDbGllbnQsXHJcbiAgICBwcml2YXRlIHNuYWNrQmFyOiBNYXRTbmFja0JhcixcclxuICApIHtcclxuICAgIGNvbnN0IG5vZGUgPSBkYXRhLmV2ZW50O1xyXG4gICAgaWYgKG5vZGUucGF0aCkge1xyXG4gICAgICB0aGlzLmRpclBhdGggPSBub2RlLnBhdGg7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLmRpclBhdGggPSBcIlwiO1xyXG4gICAgfVxyXG4gICAgdGhpcy5maWxlTmFtZSA9IFwiXCI7XHJcbiAgICB0aGlzLmZvbGRlclBhdGhPYnRhaW5lZEZyb21Ob2RlID0gdGhpcy5kaXJQYXRoO1xyXG5cclxuICB9XHJcblxyXG4gIGNyZWF0ZUZpbGUoKSB7XHJcbiAgICBjb25zdCBkaXJlY3RvcnlQYXRoOiBzdHJpbmcgPSB0aGlzLmRpclBhdGg7XHJcbiAgICBjb25zdCBwYXRoID0gZGlyZWN0b3J5UGF0aCArICcvJyArIHRoaXMuZmlsZU5hbWU7XHJcbiAgICBsZXQgb25GaWxlQ3JlYXRlUmVzcG9uc2UgPSBuZXcgTWFwKCk7XHJcbiAgICBvbkZpbGVDcmVhdGVSZXNwb25zZS5zZXQoXCJwYXRoQW5kTmFtZVwiLCB0aGlzLmRpclBhdGggKyBcIi9cIiArIHRoaXMuZmlsZU5hbWUpO1xyXG4gICAgaWYgKHRoaXMuZGlyUGF0aCAhPSB0aGlzLmZvbGRlclBhdGhPYnRhaW5lZEZyb21Ob2RlKSB7XHJcbiAgICAgIC8vSWYgdGhlIHVzZXIgY2hhbmdlZCB0aGUgcGF0aCBvYnRhaW5lZCBmcm9tIHRoZSBub2RlIG9yIHRoZSBub2RlIGhhcyBuZXZlciBiZWVuIG9wZW5lZC4uLlxyXG4gICAgICBvbkZpbGVDcmVhdGVSZXNwb25zZS5zZXQoXCJ1cGRhdGVFeGlzdGluZ1RyZWVcIiwgZmFsc2UpOyAvL3RoZW4gd2UgY2FuJ3QgdXBkYXRlIHRoZSB0cmVlLlxyXG4gICAgfSBlbHNlIHsgLy9JZiB0aGUgdXNlciBrZXB0IHRoZSBwYXRoIG9idGFpbmVkIGZyb20gdGhlIG5vZGUuLi5cclxuICAgICAgb25GaWxlQ3JlYXRlUmVzcG9uc2Uuc2V0KFwidXBkYXRlRXhpc3RpbmdUcmVlXCIsIHRydWUpOyAvL3RoZW4gd2UgY2FuIGFkZCB0aGF0IG5ldyBmb2xkZXIgaW50byB0aGUgZXhpc3Rpbmcgbm9kZS5cclxuICAgIH1cclxuICAgIHRoaXMub25GaWxlQ3JlYXRlLmVtaXQob25GaWxlQ3JlYXRlUmVzcG9uc2UpOyAvL3RoZW4gd2UgY2FuJ3QgdXBkYXRlIHRoZSB0cmVlLlxyXG4gIH1cclxuXHJcbn1cclxuXHJcbi8qXHJcbiAgVGhpcyBwcm9ncmFtIGFuZCB0aGUgYWNjb21wYW55aW5nIG1hdGVyaWFscyBhcmVcclxuICBtYWRlIGF2YWlsYWJsZSB1bmRlciB0aGUgdGVybXMgb2YgdGhlIEVjbGlwc2UgUHVibGljIExpY2Vuc2UgdjIuMCB3aGljaCBhY2NvbXBhbmllc1xyXG4gIHRoaXMgZGlzdHJpYnV0aW9uLCBhbmQgaXMgYXZhaWxhYmxlIGF0IGh0dHBzOi8vd3d3LmVjbGlwc2Uub3JnL2xlZ2FsL2VwbC12MjAuaHRtbFxyXG4gIFxyXG4gIFNQRFgtTGljZW5zZS1JZGVudGlmaWVyOiBFUEwtMi4wXHJcbiAgXHJcbiAgQ29weXJpZ2h0IENvbnRyaWJ1dG9ycyB0byB0aGUgWm93ZSBQcm9qZWN0LlxyXG4qL1xyXG4iLCI8IS0tXG5UaGlzIHByb2dyYW0gYW5kIHRoZSBhY2NvbXBhbnlpbmcgbWF0ZXJpYWxzIGFyZVxubWFkZSBhdmFpbGFibGUgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBFY2xpcHNlIFB1YmxpYyBMaWNlbnNlIHYyLjAgd2hpY2ggYWNjb21wYW5pZXNcbnRoaXMgZGlzdHJpYnV0aW9uLCBhbmQgaXMgYXZhaWxhYmxlIGF0IGh0dHBzOi8vd3d3LmVjbGlwc2Uub3JnL2xlZ2FsL2VwbC12MjAuaHRtbFxuXG5TUERYLUxpY2Vuc2UtSWRlbnRpZmllcjogRVBMLTIuMFxuXG5Db3B5cmlnaHQgQ29udHJpYnV0b3JzIHRvIHRoZSBab3dlIFByb2plY3QuXG4tLT5cbjx6bHV4LXRhYi10cmFwIGhpZGRlbklkcz1cImNyZWF0ZWZpbGVjbGVhcmljb24xLGNyZWF0ZWZpbGVjbGVhcmljb24yXCIgaGlkZGVuUG9zPVwiMiw0XCI+PC96bHV4LXRhYi10cmFwPlxuPGRpdiBjbGFzcz1cInBhZGRpbmctMVwiPlxuICA8ZGl2IGNsYXNzPVwiZC1mbGV4XCI+XG4gICAgPGRpdiBjbGFzcz1cIm1vZGFsLWljb24tY29udGFpbmVyXCI+XG4gICAgICA8IS0tIEZBIEljb24gaXMgZGV0ZXJtaW5lZCBieSBjbGFzcyBuYW1lLCBzbyB3ZSBoYXJkY29kZSB0aGUgc3R5bGUgaGVyZSAtLT5cbiAgICAgIDxtYXQtaWNvbiBzdHlsZT1cImZvbnQtc2l6ZTogMzBweDsgcG9zaXRpb246IGFic29sdXRlO1wiPmNyZWF0ZV9uZXdfZmlsZTwvbWF0LWljb24+XG4gICAgPC9kaXY+XG4gICAgPCEtLSA8aSBjbGFzcz1cInt7ZmlsZUljb259fVwiIHN0eWxlPVwiZm9udC1zaXplOiAzMHB4O3Bvc2l0aW9uOiBhYnNvbHV0ZTttYXJnaW4tdG9wOiAycHg7bWFyZ2luLWxlZnQ6IDNweDtjb2xvcjogIzAwMDAwMDtcIj48L2k+IC0tPlxuICAgIDxkaXY+XG4gICAgICA8aDIgbWF0LWRpYWxvZy10aXRsZSBjbGFzcz1cIm1vZGFsLWNvbnRlbnQtYm9keVwiPkNyZWF0ZSBhIEZpbGU8L2gyPlxuICAgIDwvZGl2PlxuICAgIDxkaXY+XG4gICAgICA8YnV0dG9uIG1hdC1kaWFsb2ctY2xvc2UgY2xhc3M9XCJjbG9zZS1kaWFsb2ctYnRuXCI+PGkgY2xhc3M9XCJmYSBmYS1jbG9zZVwiPjwvaT48L2J1dHRvbj5cbiAgICA8L2Rpdj5cbiAgPC9kaXY+XG4gIDxtYXQtZGlhbG9nLWNvbnRlbnQ+XG4gICAgPGxhYmVsPkZpbGUgbmFtZTo8L2xhYmVsPlxuICAgIDxtYXQtZm9ybS1maWVsZCBzdHlsZT1cIm1hcmdpbi1sZWZ0OiAxNXB4O1wiPlxuICAgICAgPGlucHV0IGlkPVwiY3JlYXRlLWZpbGUtaW5wdXRcIiBuYW1lPVwibmFtZVwiIFtwYXR0ZXJuXT1cImZpbGVQYXR0ZXJuXCIgbWF0SW5wdXQgdHlwZT1cInRleHRcIiBbKG5nTW9kZWwpXT1cImZpbGVOYW1lXCI+XG4gICAgICBAaWYgKGZpbGVOYW1lKSB7XG4gICAgICA8YnV0dG9uIGNsYXNzPVwibW9kYWwtY2xlYXItYnV0dG9uXCIgbWF0LWJ1dHRvbiBtYXRTdWZmaXggbWF0LWljb24tYnV0dG9uIHRhYmluZGV4PVwiLTFcIiBhcmlhLWxhYmVsPVwiQ2xlYXJcIlxuICAgICAgICAoY2xpY2spPVwiZmlsZU5hbWU9JydcIj5cbiAgICAgICAgPG1hdC1pY29uIGNsYXNzPVwiY3JlYXRlLWZpbGUtY2xlYXItaWNvblwiPmNsb3NlPC9tYXQtaWNvbj5cbiAgICAgIDwvYnV0dG9uPlxuICAgICAgfVxuICAgIDwvbWF0LWZvcm0tZmllbGQ+XG4gIDwvbWF0LWRpYWxvZy1jb250ZW50PlxuXG4gIDxtYXQtZGlhbG9nLWNvbnRlbnQ+XG4gICAgPGxhYmVsPlBhdGg6PC9sYWJlbD5cbiAgICA8bWF0LWZvcm0tZmllbGQgc3R5bGU9XCJtYXJnaW4tbGVmdDogNDVweDtcIj5cbiAgICAgIDxpbnB1dCBpZD1cImNyZWF0ZS1wYXRoLWlucHV0XCIgW3BhdHRlcm5dPVwiXCIgbWF0SW5wdXQgdHlwZT1cInRleHRcIiBbKG5nTW9kZWwpXT1cImRpclBhdGhcIj5cbiAgICAgIEBpZiAoZGlyUGF0aCkge1xuICAgICAgPGJ1dHRvbiBjbGFzcz1cIm1vZGFsLWNsZWFyLWJ1dHRvblwiIG1hdC1idXR0b24gbWF0U3VmZml4IG1hdC1pY29uLWJ1dHRvbiB0YWJpbmRleD1cIi0xXCIgYXJpYS1sYWJlbD1cIkNsZWFyXCJcbiAgICAgICAgKGNsaWNrKT1cImRpclBhdGg9JydcIj5cbiAgICAgICAgPG1hdC1pY29uIGNsYXNzPVwiY3JlYXRlLWZpbGUtY2xlYXItaWNvblwiPmNsb3NlPC9tYXQtaWNvbj5cbiAgICAgIDwvYnV0dG9uPlxuICAgICAgfVxuICAgIDwvbWF0LWZvcm0tZmllbGQ+XG4gIDwvbWF0LWRpYWxvZy1jb250ZW50PlxuICA8bWF0LWRpYWxvZy1hY3Rpb25zPlxuICAgIDxidXR0b24gbWF0LWJ1dHRvbiBtYXQtZGlhbG9nLWNsb3NlIGNsYXNzPVwibW9kYWwtbWF0LWJ1dHRvbiBjcmVhdGVcIiAoY2xpY2spPVwiY3JlYXRlRmlsZSgpXCJcbiAgICAgIFtkaXNhYmxlZF09XCIhZmlsZU5hbWUgfHwgIWRpclBhdGhcIj5DcmVhdGU8L2J1dHRvbj5cbiAgICA8IS0tIFRoZSBtYXQtZGlhbG9nLWNsb3NlIGRpcmVjdGl2ZSBvcHRpb25hbGx5IGFjY2VwdHMgYSB2YWx1ZSBhcyBhIHJlc3VsdCBmb3IgdGhlIGRpYWxvZy4gLS0+XG4gIDwvbWF0LWRpYWxvZy1hY3Rpb25zPlxuPC9kaXY+XG48IS0tXG4gICAgVGhpcyBwcm9ncmFtIGFuZCB0aGUgYWNjb21wYW55aW5nIG1hdGVyaWFscyBhcmVcbiAgICBtYWRlIGF2YWlsYWJsZSB1bmRlciB0aGUgdGVybXMgb2YgdGhlIEVjbGlwc2UgUHVibGljIExpY2Vuc2UgdjIuMCB3aGljaCBhY2NvbXBhbmllc1xuICAgIHRoaXMgZGlzdHJpYnV0aW9uLCBhbmQgaXMgYXZhaWxhYmxlIGF0IGh0dHBzOi8vd3d3LmVjbGlwc2Uub3JnL2xlZ2FsL2VwbC12MjAuaHRtbFxuXG4gICAgU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEVQTC0yLjBcblxuICAgIENvcHlyaWdodCBDb250cmlidXRvcnMgdG8gdGhlIFpvd2UgUHJvamVjdC5cbiAgICAtLT4iXX0=