/*
  This program and the accompanying materials are
  made available under the terms of the Eclipse Public License v2.0 which accompanies
  this distribution, and is available at https://www.eclipse.org/legal/epl-v20.html
  
  SPDX-License-Identifier: EPL-2.0
  
  Copyright Contributors to the Zowe Project.
*/
import { Injectable } from '@angular/core';
import { throwError } from 'rxjs';
import { catchError, map } from 'rxjs/operators';
import * as i0 from "@angular/core";
import * as i1 from "@angular/common/http";
import * as i2 from "./utils.service";
export class UssCrudService {
    handleErrorObservable(error) {
        console.error(error.message || error);
        return throwError(error.message || error);
    }
    constructor(http, utils) {
        this.http = http;
        this.utils = utils;
    }
    makeDirectory(path, forceOverwrite) {
        let url = ZoweZLUX.uriBroker.unixFileUri('mkdir', path, undefined, undefined, undefined, forceOverwrite);
        return this.http.post(url, null).pipe(catchError(this.handleErrorObservable));
    }
    makeFile(path) {
        let url = ZoweZLUX.uriBroker.unixFileUri('touch', path);
        return this.http.post(url, null).pipe(catchError(this.handleErrorObservable));
    }
    getFileContents(path) {
        let filePath = this.utils.filePathCheck(path);
        let url = ZoweZLUX.uriBroker.unixFileUri('contents', filePath);
        return this.http.get(url).pipe(catchError(this.handleErrorObservable));
    }
    getFileMetadata(path) {
        let filePath = this.utils.filePathCheck(path);
        let url = ZoweZLUX.uriBroker.unixFileUri('metadata', filePath);
        //TODO: Fix ZSS bug where "%2F" is not properly processed as a "/" character
        url = url.split("%2F").join("/");
        return this.http.get(url).pipe(catchError(this.handleErrorObservable));
    }
    copyFile(oldPath, newPath, forceOverwrite) {
        let url = ZoweZLUX.uriBroker.unixFileUri('copy', oldPath, undefined, undefined, newPath, forceOverwrite, undefined, true);
        return this.http.post(url, null).pipe(catchError(this.handleErrorObservable));
    }
    deleteFileOrFolder(path) {
        let filePath = this.utils.filePathCheck(path);
        let url = ZoweZLUX.uriBroker.unixFileUri('contents', filePath);
        return this.http.delete(url).pipe(catchError(this.handleErrorObservable));
    }
    renameFile(oldPath, newPath, forceOverwrite) {
        let url = ZoweZLUX.uriBroker.unixFileUri('rename', oldPath, undefined, undefined, newPath, forceOverwrite);
        return this.http.post(url, null).pipe(catchError(this.handleErrorObservable));
    }
    saveFile(path, fileContents, targetEncoding, forceOverwrite) {
        let url = ZoweZLUX.uriBroker.unixFileUri('contents', path, "UTF-8", targetEncoding, undefined, forceOverwrite, undefined, true);
        return this.http.put(url, fileContents).pipe(catchError(this.handleErrorObservable));
    }
    getUserHomeFolder() {
        let url = ZoweZLUX.uriBroker.userInfoUri();
        return this.http.get(url).pipe(map((res) => res), catchError(this.handleErrorObservable));
    }
    static { this.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "18.0.7", ngImport: i0, type: UssCrudService, deps: [{ token: i1.HttpClient }, { token: i2.UtilsService }], target: i0.ɵɵFactoryTarget.Injectable }); }
    static { this.ɵprov = i0.ɵɵngDeclareInjectable({ minVersion: "12.0.0", version: "18.0.7", ngImport: i0, type: UssCrudService }); }
}
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "18.0.7", ngImport: i0, type: UssCrudService, decorators: [{
            type: Injectable
        }], ctorParameters: () => [{ type: i1.HttpClient }, { type: i2.UtilsService }] });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidXNzLmNydWQuc2VydmljZS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uL3Byb2plY3RzL3psdXgtZmlsZS1leHBsb3Jlci9zcmMvbGliL3NlcnZpY2VzL3Vzcy5jcnVkLnNlcnZpY2UudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBRUE7Ozs7Ozs7O0VBUUU7QUFFRixPQUFPLEVBQUUsVUFBVSxFQUFJLE1BQU0sZUFBZSxDQUFDO0FBRTdDLE9BQU8sRUFBYyxVQUFVLEVBQUUsTUFBTSxNQUFNLENBQUM7QUFDOUMsT0FBTyxFQUFFLFVBQVUsRUFBRSxHQUFHLEVBQUUsTUFBTSxnQkFBZ0IsQ0FBQzs7OztBQUlqRCxNQUFNLE9BQU8sY0FBYztJQUVqQixxQkFBcUIsQ0FBRSxLQUFxQjtRQUNsRCxPQUFPLENBQUMsS0FBSyxDQUFDLEtBQUssQ0FBQyxPQUFPLElBQUksS0FBSyxDQUFDLENBQUM7UUFDdEMsT0FBTyxVQUFVLENBQUMsS0FBSyxDQUFDLE9BQU8sSUFBSSxLQUFLLENBQUMsQ0FBQztJQUM1QyxDQUFDO0lBQ0QsWUFBb0IsSUFBZ0IsRUFBVSxLQUFrQjtRQUE1QyxTQUFJLEdBQUosSUFBSSxDQUFZO1FBQVUsVUFBSyxHQUFMLEtBQUssQ0FBYTtJQUFFLENBQUM7SUFDbkUsYUFBYSxDQUFDLElBQVcsRUFBRSxjQUF3QjtRQUNqRCxJQUFJLEdBQUcsR0FBVSxRQUFRLENBQUMsU0FBUyxDQUFDLFdBQVcsQ0FBQyxPQUFPLEVBQUUsSUFBSSxFQUFFLFNBQVMsRUFBRSxTQUFTLEVBQUUsU0FBUyxFQUFFLGNBQWMsQ0FBQyxDQUFDO1FBQ2hILE9BQU8sSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsR0FBRyxFQUFFLElBQUksQ0FBQyxDQUFDLElBQUksQ0FDbkMsVUFBVSxDQUFDLElBQUksQ0FBQyxxQkFBcUIsQ0FBQyxDQUN2QyxDQUFBO0lBQ0gsQ0FBQztJQUVELFFBQVEsQ0FBQyxJQUFXO1FBQ2xCLElBQUks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UUFBUSxDQUFDLFNBQVMsQ0FBQyxXQUFXLENBQUMsVUFBVSxFQUFFLElBQUksRUFBRSxPQUFPLEVBQUUsY0FBYyxFQUFFLFNBQVMsRUFBRSxjQUFjLEVBQUUsU0FBUyxFQUFFLElBQUksQ0FBQyxDQUFDO1FBQ3hJLE9BQU8sSUFBSSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsR0FBRyxFQUFDLFlBQVksQ0FBQyxDQUFDLElBQUksQ0FDekMsVUFBVSxDQUFDLElBQUksQ0FBQyxxQkFBcUIsQ0FBQyxDQUN2QyxDQUFBO0lBQ0wsQ0FBQztJQUVELGlCQUFpQjtRQUNmLElBQUksR0FBRyxHQUFXLFFBQVEsQ0FBQyxTQUFTLENBQUMsV0FBVyxFQUFFLENBQUM7UUFDbkQsT0FBTyxJQUFJLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxJQUFJLENBQzVCLEdBQUcsQ0FBQyxDQUFDLEdBQU8sRUFBQyxFQUFFLENBQUEsR0FBRyxDQUFDLEVBQ25CLFVBQVUsQ0FBQyxJQUFJLENBQUMscUJBQXFCLENBQUMsQ0FDdkMsQ0FBQTtJQUNILENBQUM7OEdBNUVVLGNBQWM7a0hBQWQsY0FBYzs7MkZBQWQsY0FBYztrQkFEMUIsVUFBVSIsInNvdXJjZXNDb250ZW50IjpbIlxyXG5cclxuLypcclxuICBUaGlzIHByb2dyYW0gYW5kIHRoZSBhY2NvbXBhbnlpbmcgbWF0ZXJpYWxzIGFyZVxyXG4gIG1hZGUgYXZhaWxhYmxlIHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgRWNsaXBzZSBQdWJsaWMgTGljZW5zZSB2Mi4wIHdoaWNoIGFjY29tcGFuaWVzXHJcbiAgdGhpcyBkaXN0cmlidXRpb24sIGFuZCBpcyBhdmFpbGFibGUgYXQgaHR0cHM6Ly93d3cuZWNsaXBzZS5vcmcvbGVnYWwvZXBsLXYyMC5odG1sXHJcbiAgXHJcbiAgU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEVQTC0yLjBcclxuICBcclxuICBDb3B5cmlnaHQgQ29udHJpYnV0b3JzIHRvIHRoZSBab3dlIFByb2plY3QuXHJcbiovXHJcblxyXG5pbXBvcnQgeyBJbmplY3RhYmxlICAgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcclxuaW1wb3J0IHsgSHR0cENsaWVudCB9IGZyb20gJ0Bhbmd1bGFyL2NvbW1vbi9odHRwJztcclxuaW1wb3J0IHsgT2JzZXJ2YWJsZSwgdGhyb3dFcnJvciB9IGZyb20gJ3J4anMnO1xyXG5pbXBvcnQgeyBjYXRjaEVycm9yLCBtYXAgfSBmcm9tICdyeGpzL29wZXJhdG9ycyc7XHJcbmltcG9ydCB7IFV0aWxzU2VydmljZSB9IGZyb20gJy4vdXRpbHMuc2VydmljZSdcclxuXHJcbkBJbmplY3RhYmxlKClcclxuZXhwb3J0IGNsYXNzIFVzc0NydWRTZXJ2aWNlIHtcclxuXHJcbiAgcHJpdmF0ZSBoYW5kbGVFcnJvck9ic2VydmFibGUgKGVycm9yOiBSZXNwb25zZSB8IGFueSkge1xyXG4gICAgY29uc29sZS5lcnJvcihlcnJvci5tZXNzYWdlIHx8IGVycm9yKTtcclxuICAgIHJldHVybiB0aHJvd0Vycm9yKGVycm9yLm1lc3NhZ2UgfHwgZXJyb3IpO1xyXG4gIH1cclxuICBjb25zdHJ1Y3Rvcihwcml2YXRlIGh0dHA6IEh0dHBDbGllbnQsIHByaXZhdGUgdXRpbHM6VXRpbHNTZXJ2aWNlKXt9XHJcbiAgbWFrZURpcmVjdG9yeShwYXRoOnN0cmluZywgZm9yY2VPdmVyd3JpdGU/OiBib29sZWFuKTogT2JzZXJ2YWJsZTxhbnk+e1xyXG4gICAgbGV0IHVybDpzdHJpbmcgPSBab3dlWkxVWC51cmlCcm9rZXIudW5peEZpbGVVcmkoJ21rZGlyJywgcGF0aCwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgZm9yY2VPdmVyd3JpdGUpO1xyXG4gICAgcmV0dXJuIHRoaXMuaHR0cC5wb3N0KHVybCwgbnVsbCkucGlwZShcclxuICAgICAgY2F0Y2hFcnJvcih0aGlzLmhhbmRsZUVycm9yT2JzZXJ2YWJsZSlcclxuICAgIClcclxuICB9XHJcblxyXG4gIG1ha2VGaWxlKHBhdGg6c3RyaW5nKTogT2JzZXJ2YWJsZTxhbnk+e1xyXG4gICAgbGV0IHVybDpzdHJpbmcgPSBab3dlWkxVWC51cmlCcm9rZXIudW5peEZpbGVVcmkoJ3RvdWNoJywgcGF0aCk7XHJcbiAgICByZXR1cm4gdGhpcy5odHRwLnBvc3QodXJsLCBudWxsKS5waXBlKFxyXG4gICAgICBjYXRjaEVycm9yKHRoaXMuaGFuZGxlRXJyb3JPYnNlcnZhYmxlKVxyXG4gICAgKVxyXG4gIH1cclxuXHJcbiAgZ2V0RmlsZUNvbnRlbnRzKHBhdGg6c3RyaW5nKTogT2JzZXJ2YWJsZTxhbnk+IHtcclxuICAgIGxldCBmaWxlUGF0aDpzdHJpbmcgPSB0aGlzLnV0aWxzLmZpbGVQYXRoQ2hlY2socGF0aCk7XHJcbiAgICBsZXQgdXJsOnN0cmluZyA9IFpvd2VaTFVYLnVyaUJyb2tlci51bml4RmlsZVVyaSgnY29udGVudHMnLCBmaWxlUGF0aCk7XHJcbiAgICByZXR1cm4gdGhpcy5odHRwLmdldCh1cmwpLnBpcGUoXHJcbiAgICAgIGNhdGNoRXJyb3IodGhpcy5oYW5kbGVFcnJvck9ic2VydmFibGUpXHJcbiAgICApXHJcbiAgfVxyXG5cclxuICBnZXRGaWxlTWV0YWRhdGEocGF0aDpzdHJpbmcpOiBPYnNlcnZhYmxlPGFueT4ge1xyXG4gICAgbGV0IGZpbGVQYXRoOnN0cmluZyA9IHRoaXMudXRpbHMuZmlsZVBhdGhDaGVjayhwYXRoKTtcclxuICAgIGxldCB1cmw6c3RyaW5nID0gWm93ZVpMVVgudXJpQnJva2VyLnVuaXhGaWxlVXJpKCdtZXRhZGF0YScsIGZpbGVQYXRoKTtcclxuXHJcbiAgICAvL1RPRE86IEZpeCBaU1MgYnVnIHdoZXJlIFwiJTJGXCIgaXMgbm90IHByb3Blcmx5IHByb2Nlc3NlZCBhcyBhIFwiL1wiIGNoYXJhY3RlclxyXG4gICAgdXJsID0gdXJsLnNwbGl0KFwiJTJGXCIpLmpvaW4oXCIvXCIpO1xyXG5cclxuICAgIHJldHVybiB0aGlzLmh0dHAuZ2V0KHVybCkucGlwZShcclxuICAgICAgY2F0Y2hFcnJvcih0aGlzLmhhbmRsZUVycm9yT2JzZXJ2YWJsZSlcclxuICAgIClcclxuICB9XHJcblxyXG4gIGNvcHlGaWxlKG9sZFBhdGg6c3RyaW5nLCBuZXdQYXRoOnN0cmluZywgZm9yY2VPdmVyd3JpdGU/OiBib29sZWFuKTogT2JzZXJ2YWJsZTxhbnk+e1xyXG4gICAgICBsZXQgdXJsIDpzdHJpbmcgPSBab3dlWkxVWC51cmlCcm9rZXIudW5peEZpbGVVcmkoJ2NvcHknLCBvbGRQYXRoLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgbmV3UGF0aCwgZm9yY2VPdmVyd3JpdGUsIHVuZGVmaW5lZCwgdHJ1ZSk7XHJcbiAgICAgIHJldHVybiB0aGlzLmh0dHAucG9zdCh1cmwsIG51bGwpLnBpcGUoXHJcbiAgICAgICAgY2F0Y2hFcnJvcih0aGlzLmhhbmRsZUVycm9yT2JzZXJ2YWJsZSlcclxuICAgICAgKVxyXG4gIH1cclxuXHJcbiAgZGVsZXRlRmlsZU9yRm9sZGVyKHBhdGg6c3RyaW5nKTogT2JzZXJ2YWJsZTxhbnk+e1xyXG4gICAgbGV0IGZpbGVQYXRoOnN0cmluZyA9IHRoaXMudXRpbHMuZmlsZVBhdGhDaGVjayhwYXRoKTtcclxuICAgIGxldCB1cmwgOnN0cmluZyA9IFpvd2VaTFVYLnVyaUJyb2tlci51bml4RmlsZVVyaSgnY29udGVudHMnLCBmaWxlUGF0aCk7XHJcbiAgICByZXR1cm4gdGhpcy5odHRwLmRlbGV0ZSh1cmwpLnBpcGUoXHJcbiAgICAgIGNhdGNoRXJyb3IodGhpcy5oYW5kbGVFcnJvck9ic2VydmFibGUpXHJcbiAgICApXHJcbiAgfVxyXG5cclxuICByZW5hbWVGaWxlKG9sZFBhdGg6c3RyaW5nLCBuZXdQYXRoOnN0cmluZywgZm9yY2VPdmVyd3JpdGU/OiBib29sZWFuKTogT2JzZXJ2YWJsZTxhbnk+e1xyXG4gICAgICBsZXQgdXJsIDpzdHJpbmcgPSBab3dlWkxVWC51cmlCcm9rZXIudW5peEZpbGVVcmkoJ3JlbmFtZScsIG9sZFBhdGgsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCBuZXdQYXRoLCBmb3JjZU92ZXJ3cml0ZSk7XHJcbiAgICAgIHJldHVybiB0aGlzLmh0dHAucG9zdCh1cmwsIG51bGwpLnBpcGUoXHJcbiAgICAgICAgY2F0Y2hFcnJvcih0aGlzLmhhbmRsZUVycm9yT2JzZXJ2YWJsZSlcclxuICAgICAgKVxyXG4gIH1cclxuXHJcbiAgc2F2ZUZpbGUocGF0aDpzdHJpbmcsIGZpbGVDb250ZW50czpzdHJpbmcsIHRhcmdldEVuY29kaW5nPzogc3RyaW5nLCBmb3JjZU92ZXJ3cml0ZT86IGJvb2xlYW4pOiBPYnNlcnZhYmxlPGFueT57XHJcbiAgICAgIGxldCB1cmwgOnN0cmluZyA9IFpvd2VaTFVYLnVyaUJyb2tlci51bml4RmlsZVVyaSgnY29udGVudHMnLCBwYXRoLCBcIlVURi04XCIsIHRhcmdldEVuY29kaW5nLCB1bmRlZmluZWQsIGZvcmNlT3ZlcndyaXRlLCB1bmRlZmluZWQsIHRydWUpO1xyXG4gICAgICByZXR1cm4gdGhpcy5odHRwLnB1dCh1cmwsZmlsZUNvbnRlbnRzKS5waXBlKFxyXG4gICAgICAgIGNhdGNoRXJyb3IodGhpcy5oYW5kbGVFcnJvck9ic2VydmFibGUpXHJcbiAgICAgIClcclxuICB9XHJcbiAgXHJcbiAgZ2V0VXNlckhvbWVGb2xkZXIoKTogT2JzZXJ2YWJsZTx7aG9tZTogc3RyaW5nfT57XHJcbiAgICBsZXQgdXJsIDpzdHJpbmcgPSBab3dlWkxVWC51cmlCcm9rZXIudXNlckluZm9VcmkoKTtcclxuICAgIHJldHVybiB0aGlzLmh0dHAuZ2V0KHVybCkucGlwZShcclxuICAgICAgbWFwKChyZXM6YW55KT0+cmVzKSxcclxuICAgICAgY2F0Y2hFcnJvcih0aGlzLmhhbmRsZUVycm9yT2JzZXJ2YWJsZSlcclxuICAgIClcclxuICB9XHJcbn1cclxuXHJcbi8qXHJcbiAgVGhpcyBwcm9ncmFtIGFuZCB0aGUgYWNjb21wYW55aW5nIG1hdGVyaWFscyBhcmVcclxuICBtYWRlIGF2YWlsYWJsZSB1bmRlciB0aGUgdGVybXMgb2YgdGhlIEVjbGlwc2UgUHVibGljIExpY2Vuc2UgdjIuMCB3aGljaCBhY2NvbXBhbmllc1xyXG4gIHRoaXMgZGlzdHJpYnV0aW9uLCBhbmQgaXMgYXZhaWxhYmxlIGF0IGh0dHBzOi8vd3d3LmVjbGlwc2Uub3JnL2xlZ2FsL2VwbC12MjAuaHRtbFxyXG4gIFxyXG4gIFNQRFgtTGljZW5zZS1JZGVudGlmaWVyOiBFUEwtMi4wXHJcbiAgXHJcbiAgQ29weXJpZ2h0IENvbnRyaWJ1dG9ycyB0byB0aGUgWm93ZSBQcm9qZWN0LlxyXG4qL1xyXG5cclxuIl19