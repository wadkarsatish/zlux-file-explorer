<!-- 
  This program and the accompanying materials are
  made available under the terms of the Eclipse Public License v2.0 which accompanies
  this distribution, and is available at https://www.eclipse.org/legal/epl-v20.html
  
  SPDX-License-Identifier: EPL-2.0
  
  Copyright Contributors to the Zowe Project.
-->
<zlux-tab-trap></zlux-tab-trap>
<button mat-dialog-close class="close-dialog-btn"><i class="fa fa-close"></i></button>
<h2 mat-dialog-title>CREATE DATASET</h2>
<p class="mandatory">Mandatory fields are marked with an asterisk</p>
<mat-dialog-content>
  <label>Dataset Type:</label>
  <mat-form-field>
    <mat-select class="select-encoding" tabindex="0" placeholder="Select" [(ngModel)]="properties.datasetType" #datasetTypeInput (selectionChange)="onDatasetTypeChange(datasetTypeInput.value)">
      <mat-option *ngFor="let datasetType of datasetTypeOptions" [value]="datasetType">
      {{datasetType}}</mat-option>
    </mat-select>
  </mat-form-field>
  <p></p>
  <label class="required">Dataset Name:</label>
  <mat-form-field>
    <input matInput type="text" maxlength="44" [pattern]="datasetNamePattern" [(ngModel)]="properties.name" #nameInput="ngModel" [errorStateMatcher]="matcher">
    <mat-error>Invalid Name</mat-error>
  </mat-form-field>
  <p></p>
  <label class="required">Record Format:</label>
  <mat-form-field>
    <mat-select class="select-encoding" tabindex="0" placeholder="Select" [(ngModel)]="properties.recordFormat">
      <mat-option *ngFor="let recordFormat of recordFormatOptions" [value]="recordFormat">
      {{recordFormat}}</mat-option>
    </mat-select>
  </mat-form-field>
  <p></p>
  <label class="required">Record Length:</label>
  <mat-form-field>
    <input matInput [pattern]="numericPattern" [(ngModel)]="properties.recordLength" #recLengthInput="ngModel" [errorStateMatcher]="matcher">
    <mat-error>Invalid Record Length</mat-error>
  </mat-form-field>
  <p></p>
  <label class="required">Block Size :</label>
  <mat-form-field>
    <input matInput [pattern]="numericPattern" [(ngModel)]="properties.blockSize" #blockSize="ngModel" [errorStateMatcher]="matcher">
    <mat-error>Invalid Block Size</mat-error>
  </mat-form-field>
  <p></p>
  <label class="required">Dataset Organization:</label>
  <mat-form-field>
    <mat-select class="select-encoding" tabindex="0" placeholder="Select" [(ngModel)]="properties.organization">
      <mat-option *ngFor="let organization of organizationOptions" [value]="organization">
      {{organization}}</mat-option>
    </mat-select>
  </mat-form-field>
  <p></p>
  <label>Dataset Name Type:</label>
  <mat-form-field>
    <input matInput [(ngModel)]="properties.datasetNameType" placeholder="Blank for PS Dataset" readonly>
  </mat-form-field>
  <p></p>
  <p></p>
  <h6 style="text-align: center;"> ADVANCE ATTRIBUTES
    <span>
      <i class="fa fa-caret-down" title="Expand view" *ngIf="!showAdvanceAttributes" (click)="showAdvanceAttributes=!showAdvanceAttributes" style="cursor: pointer; font-size: large;"></i>
      <i class="fa fa-caret-up" title="Collapse view" *ngIf="showAdvanceAttributes" (click)="showAdvanceAttributes=!showAdvanceAttributes" style="cursor: pointer; font-size: large;"></i>
    </span>
  </h6>
  <p></p>
  <div [hidden]="!showAdvanceAttributes">
  <label>Preset:</label>
  <mat-form-field>
    <mat-select class="select-encoding" tabindex="0" placeholder="Select" [(ngModel)]="properties.preset" #presetInput (selectionChange)="onPresetChange(presetInput.value)">
      <mat-option>None</mat-option>
      <mat-option *ngFor="let preset of presetOptions" [value]="preset">
      {{preset}}</mat-option>
    </mat-select>
  </mat-form-field>
  <p></p>
  <label>Allocation Unit:</label>
  <mat-form-field>
    <mat-select class="select-encoding" tabindex="0" placeholder="Select" [(ngModel)]="properties.allocationUnit">
      <mat-option>None</mat-option>
      <mat-option *ngFor="let allocationUnit of allocationUnitOptions" [value]="allocationUnit">
      {{allocationUnit}}</mat-option>
    </mat-select>
  </mat-form-field>
  <p></p>
  <label>Average Record Unit:</label>
  <mat-form-field>
    <mat-select class="select-encoding" tabindex="0" placeholder="Select" [(ngModel)]="properties.averageRecordUnit">
      <mat-option>None</mat-option>
      <mat-option *ngFor="let averageRecordUnit of recordUnitOptions" [value]="averageRecordUnit">
      {{averageRecordUnit}}</mat-option>
    </mat-select>
  </mat-form-field>
  <p></p>
  <label>Primary Space:</label>
  <mat-form-field>
    <input matInput [pattern]="numericPatternExZero" [(ngModel)]="properties.primarySpace" #primarySpaceInput="ngModel" [errorStateMatcher]="matcher">
    <mat-error>Invalid Primary Space</mat-error>
  </mat-form-field>
  <p></p>
  <label>Secondary Space:</label>
  <mat-form-field>
    <input matInput [pattern]="numericPattern" [(ngModel)]="properties.secondarySpace" #secSpaceInput="ngModel" [errorStateMatcher]="matcher">
    <mat-error>Invalid Secondary Space</mat-error>
  </mat-form-field>
  <p></p>
  <label>Directory Blocks:</label>
  <mat-form-field>
    <input matInput [pattern]="numericPattern" [(ngModel)]="properties.directoryBlocks" #dirBlockInput="ngModel" [errorStateMatcher]="matcher">
    <mat-error>Invalid Directory Blocks</mat-error>
  </mat-form-field>
  </div>
</mat-dialog-content>
<mat-dialog-actions>
  <button 
    mat-button 
    mat-stroked-button 
    class="right" 
    color="primary" 
    [mat-dialog-close]="properties"
    [disabled]="!properties.name || !properties.recordLength || !properties.blockSize || nameInput.invalid || primarySpaceInput.invalid || secSpaceInput.invalid || dirBlockInput.invalid || recLengthInput.invalid || blockSize.invalid">
    Save
  </button>
</mat-dialog-actions>

<!-- 
  This program and the accompanying materials are
  made available under the terms of the Eclipse Public License v2.0 which accompanies
  this distribution, and is available at https://www.eclipse.org/legal/epl-v20.html
  
  SPDX-License-Identifier: EPL-2.0
  
  Copyright Contributors to the Zowe Project.
-->